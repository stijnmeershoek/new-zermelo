import{u as T,n as f,c as S,i as o,a as l,S as c,g as w,F as y,d as m,f as E,e as N,t as i,y as D}from"./index.5c9554bf.js";import{L as $}from"./App.cd210302.js";import{T as v}from"./Translate.2eb81582.js";const L=i("<div></div>"),M=i('<div class="form-scroller"></div>'),A=i('<button type="submit" aria-label="enroll"></button>'),j=i('<dialog aria-modal="true" class="choice-modal" aria-label="choice info"><form></form></dialog>'),F=i('<input type="radio" name="enroll" id="enroll">'),x=t=>{const{accounts:_,currentAccount:b}=T(),[d,k]=f(""),[p,g]=f(!1);S(()=>{setTimeout(()=>{g(!0)},1)});const h=()=>{g(!1),setTimeout(()=>{t.closeModal()},150)},C=r=>{if(r.preventDefault(),!d)return;const{school:a,accessToken:e}=_()[b()],s=new AbortController().signal;D("POST",d(),e,a,s).then(()=>{h()})};return(()=>{const r=j.cloneNode(!0),a=r.firstChild;return r.$$click=e=>{e.target.classList.contains("choice-modal")&&h()},a.addEventListener("submit",C),o(a,l(c,{get when(){return t.selectedLesson()},get children(){return[(()=>{const e=M.cloneNode(!0);return o(e,l(c,{get when(){return t.selectedLesson()?.appointmentType!=="conflict"},get children(){const n=L.cloneNode(!0);return o(n,l($,{isDesktop:()=>!0,get lesson(){return t.selectedLesson()},onClick:()=>{}})),n}}),null),o(e,l(c,{get when(){return w(()=>!!(t.selectedLesson()&&t.selectedLesson()?.actions))()&&t.selectedLesson()?.actions?.length!==0},get children(){return l(y,{get each(){return t.selectedLesson()?.actions},children:n=>(()=>{const s=L.cloneNode(!0);return o(s,l(c,{get when(){return t.selectedLesson()?.appointmentType==="choice"},get children(){const u=F.cloneNode(!0);return u.addEventListener("change",()=>{k(n.post)}),m(()=>u.value=n.post),m(()=>u.checked=d()===n.post),u}}),null),o(s,l($,{isDesktop:()=>!0,get lesson(){return n.appointment},onClick:()=>{}}),null),s})()})}}),null),e})(),l(c,{get when(){return t.selectedLesson()?.appointmentType==="choice"},get children(){const e=A.cloneNode(!0);return e.disabled=!d,o(e,l(c,{get when(){return t.selectedLesson()?.studentEnrolled},get fallback(){return l(v,{nlString:"Inschrijven",enString:"Enroll"})},get children(){return l(v,{nlString:"Uitschrijven",enString:"Disenroll"})}})),e}})]}})),m(e=>{const n=p(),s=`${t.selectedLesson?t.selectedLesson()?.appointmentType+" ":""}${t.selectedLesson()?.cancelled?"cancelled ":""}content`;return n!==e._v$&&(r.open=e._v$=n),s!==e._v$2&&E(a,e._v$2=s),e},{_v$:void 0,_v$2:void 0}),r})()};N(["click"]);export{x as ChoiceModal};
