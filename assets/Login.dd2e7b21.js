import{u as q,j as I,w as M,i,a as r,b as d,S as v,d as S,f,t as k,x as R,e as j}from"./index.771b03eb.js";import{T as a}from"./Translate.7bcbe563.js";const z=k('<button class="back" aria-label="go back"><svg viewBox="0, 0, 400,400"><g><path id="path0" d="M133.594 60.920 C 129.853 62.938,1.851 191.233,0.820 193.996 C -0.234 196.823,-0.234 203.177,0.820 206.004 C 1.904 208.909,129.973 337.146,133.758 339.116 C 143.576 344.226,154.799 337.317,154.799 326.163 C 154.799 319.823,155.717 320.847,101.220 266.406 L 49.995 215.234 219.724 214.844 L 389.453 214.453 392.740 212.697 C 402.651 207.400,402.463 192.009,392.427 187.024 C 389.545 185.593,384.190 185.535,219.724 185.156 L 49.995 184.766 101.564 133.203 C 155.745 79.028,154.953 79.923,154.813 72.963 C 154.604 62.544,142.897 55.899,133.594 60.920 " stroke="none" fill="currentColor" fill-rule="evenodd"></path></g></svg></button>'),B=k('<div class="login"><form><h1></h1><label for="name"></label><input id="name" type="text" required><label for="school">School</label><input id="school" type="text" required><label for="code">Code</label><input autocomplete="off" id="code" type="text" required><button aria-label="login" type="submit"></button><span class="err"></span></form></div>');function O(m){const{localPREFIX:L,logIn:w,toggleAddAccount:E}=q(),[c,b]=I({nlString:"",enString:""}),[o,$]=M({name:"",school:"",code:""}),h=t=>n=>{const l=n.currentTarget;l.type==="checkbox"?$({[t]:!!l.checked}):$({[t]:l.value})},N=()=>{b({nlString:"",enString:""});const t=JSON.parse(localStorage.getItem(`${L}-accounts`)||"[]");if(t.some(n=>n.accountName===o.name)){b({nlString:"Er bestaat al een account met deze naam.",enString:"An account with this name already exists."});return}R(o.school,o.code.replace(/\s+/g,"")).then(n=>{const l={accountName:o.name,school:o.school,accessToken:n};w(l,t)}).catch(n=>{b({nlString:"",enString:n.message})})};return(()=>{const t=B.cloneNode(!0),n=t.firstChild,l=n.firstChild,p=l.nextSibling,s=p.nextSibling,T=s.nextSibling,u=T.nextSibling,y=u.nextSibling,g=y.nextSibling,_=g.nextSibling,F=_.nextSibling;return i(t,r(v,{get when(){return m.addAccount()},get children(){const e=z.cloneNode(!0);return d(e,"click",E,!0),e}}),n),n.addEventListener("submit",e=>{e.preventDefault(),N()}),i(l,r(v,{get when(){return m.addAccount()},get fallback(){return r(a,{nlString:"Login",enString:"Login"})},get children(){return r(a,{nlString:"Account Toevoegen",enString:"Add Account"})}})),i(p,r(a,{nlString:"Account Naam",enString:"Account Name"})),d(s,"input",h("name"),!0),d(u,"input",h("school"),!0),d(g,"input",h("code"),!0),i(_,r(v,{get when(){return m.addAccount()},get fallback(){return r(a,{nlString:"Login",enString:"Login"})},get children(){return r(a,{nlString:"Account Toevoegen",enString:"Add Account"})}})),i(F,r(a,{get nlString(){return c().nlString},get enString(){return c().enString}})),S(e=>{const A=`${c()?"err":""}`,x=`${c()?"err":""}`,C=`${c()?"err":""}`;return A!==e._v$&&f(s,e._v$=A),x!==e._v$2&&f(u,e._v$2=x),C!==e._v$3&&f(g,e._v$3=C),e},{_v$:void 0,_v$2:void 0,_v$3:void 0}),S(()=>s.value=o.name),S(()=>u.value=o.school),S(()=>g.value=o.code),t})()}j(["click","input"]);export{O as default};
