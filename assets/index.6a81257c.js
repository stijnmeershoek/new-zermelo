import{u as pe,j as U,g as x,c as me,w as ue,i as n,a as i,b as g,d as p,f as Se,s as v,e as ce,t as $e}from"./index.771b03eb.js";import{T as a}from"./Translate.7bcbe563.js";const ve=$e('<dialog aria-modal="true" class="add-appointment-modal" aria-label="add appointment"><div><h2></h2><form><label for="appointmentType">:</label><select name="appointmentType" id="appointmentType"><option value="lesson"></option><option value="activity"></option><option value="meeting"></option><option value="talk"></option><option value="exam"></option><option value="other"></option></select><label for="day">:</label><input type="date" name="day" id="day" required><label for="start">:</label><input type="time" name="start" id="start" required><label for="end">:</label><input type="time" name="end" id="end" required><label for="title">:</label><input type="text" name="title" id="title" required><label for="location">:</label><input type="text" name="location" id="location"><span class="err"></span><button type="submit"></button></form></div></dialog>'),_e=W=>{const{user:m,scheduleHours:y,localPREFIX:L}=pe(),[f,b]=U({nlString:"",enString:""}),[Y,j]=U(!1),u=x(()=>`${y()[0]}:00`.padStart(5,"0")),S=x(()=>`${y()[y().length-1]}:00`.padStart(5,"0")),Z=x(()=>Number(u().replace(/:\s*/g,""))),ee=x(()=>Number(S().replace(/:\s*/g,"")));me(()=>{setTimeout(()=>{j(!0)},1)});const D=()=>{j(!1),setTimeout(()=>{W.setAddAppointmentOpen(!1)},150)},[t,te]=ue({day:"",start:"",end:"",appointmentType:"lesson",title:"",location:""}),d=l=>r=>{const s=r.currentTarget;if(s.name==="start"||s.name==="end"){b({nlString:"",enString:""});const o=Number(s.value.replace(/:\s*/g,"").padStart(4,"0"));if(o<Z()||o>ee()){b({nlString:`Tijden moeten tussen ${u} en ${S} zijn.`,enString:`Times must be between ${u} and ${S}`});return}if(s.name==="end"&&o<Number(t.start.replace(/:\s*/g,"").padStart(4,"0"))){b({nlString:"Einde mag niet voor het begin zijn",enString:"End mustn't be before start"});return}}te({[l]:s.value})},ne=l=>{if(l.preventDefault(),!t.day||!t.start||!t.end||!t.title)return;const r={start:Math.floor(new Date(`${t.day}T${t.start}`).getTime()/1e3),end:Math.floor(new Date(`${t.day}T${t.end}`).getTime()/1e3),cancelled:!1,appointmentType:t.appointmentType,online:!1,optional:!1,subjects:[`${t.title}`],groups:[],teachers:[],locations:[`${t.location}`]};ie(r)},ie=l=>{if(!m)return;const r=JSON.parse(localStorage.getItem(`${L}-customappointments`)||"{}");if(r[m()]||(r[m()]=[]),r[m()].some(o=>l.start>o.start&&l.start<o.end||l.end<o.end&&l.end>o.start)){b({nlString:"Afspraken mogen niet overlappen.",enString:"Appointments mustn't overlap."});return}r[m()].push(l),localStorage.setItem(`${L}-customappointments`,JSON.stringify(r)),D()};return(()=>{const l=ve.cloneNode(!0),r=l.firstChild,s=r.firstChild,o=s.nextSibling,h=o.firstChild,ae=h.firstChild,_=h.nextSibling,O=_.firstChild,q=O.nextSibling,F=q.nextSibling,I=F.nextSibling,z=I.nextSibling,le=z.nextSibling,T=_.nextSibling,re=T.firstChild,A=T.nextSibling,E=A.nextSibling,oe=E.firstChild,c=E.nextSibling,C=c.nextSibling,se=C.firstChild,$=C.nextSibling,k=$.nextSibling,de=k.firstChild,M=k.nextSibling,N=M.nextSibling,ge=N.firstChild,w=N.nextSibling,J=w.nextSibling,R=J.nextSibling;return l.$$click=e=>{e.target.classList.contains("add-appointment-modal")&&D()},n(s,i(a,{nlString:"Maak een nieuwe afspraak",enString:"Create a new appointment"})),o.addEventListener("submit",ne),n(h,i(a,{nlString:"Afspraak type",enString:"Appointment type"}),ae),g(_,"input",d("appointmentType"),!0),n(O,i(a,{nlString:"Les",enString:"Lesson"})),n(q,i(a,{nlString:"Activiteit",enString:"Activity"})),n(F,i(a,{nlString:"Vergadering",enString:"Meeting"})),n(I,i(a,{nlString:"Gesprek",enString:"Talk"})),n(z,i(a,{nlString:"Examen",enString:"Exam"})),n(le,i(a,{nlString:"Anders",enString:"Other"})),n(T,i(a,{nlString:"Dag",enString:"Day"}),re),g(A,"change",d("day")),n(E,i(a,{nlString:"Begin",enString:"Start"}),oe),g(c,"change",d("start")),n(C,i(a,{nlString:"Einde",enString:"End"}),se),g($,"change",d("end")),n(k,i(a,{nlString:"Titel",enString:"Title"}),de),g(M,"input",d("title"),!0),n(N,i(a,{nlString:"Locatie",enString:"Location"}),ge),g(w,"input",d("location"),!0),n(J,i(a,{get nlString(){return f().nlString},get enString(){return f().enString}})),n(R,i(a,{nlString:"Toevoegen",enString:"Add"})),p(e=>{const B=Y(),G=`content ${t.appointmentType}`,H=`${new Date().toISOString().slice(0,10)}`,P=u(),V=S(),X=u(),K=S(),Q=f().nlString!==""||f().enString!=="";return B!==e._v$&&(l.open=e._v$=B),G!==e._v$2&&Se(r,e._v$2=G),H!==e._v$3&&v(A,"min",e._v$3=H),P!==e._v$4&&v(c,"min",e._v$4=P),V!==e._v$5&&v(c,"max",e._v$5=V),X!==e._v$6&&v($,"min",e._v$6=X),K!==e._v$7&&v($,"max",e._v$7=K),Q!==e._v$8&&(R.disabled=e._v$8=Q),e},{_v$:void 0,_v$2:void 0,_v$3:void 0,_v$4:void 0,_v$5:void 0,_v$6:void 0,_v$7:void 0,_v$8:void 0}),p(()=>_.value=t.appointmentType),p(()=>c.value=t.start),p(()=>$.value=t.end),p(()=>M.value=t.title),p(()=>w.value=t.location),l})()};ce(["click","input"]);export{_e as AddAppointmentModal};
